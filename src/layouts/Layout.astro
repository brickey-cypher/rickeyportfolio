---
import '../styles/global.css';
import ThemeToggle from '@components/ThemeToggle';
import { initMatrixRain } from '../../public/scripts/matrixRain.js/index.js';
const { title = 'Brianna Marie Rickey | Cybersecurity Portfolio' } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- Early theme script to avoid FOUC -->
    <script is:inline>
      try {
        const theme = localStorage.getItem('theme');
        if (
          theme === 'dark' ||
          (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)
        ) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      } catch (e) {
        console.error('Theme init error:', e);
      }
    </script>

    <title>{title}</title>
  </head>
  <body
    class="bg-zinc-900 text-white dark:bg-zinc-900 dark:text-white min-h-screen antialiased relative"
  >
    <!-- Fallback background color to reduce flash -->
    <style>
      body {
        background-color: #0f0f0f;
      }
    </style>

    <!-- Dim patterned background layer -->
    <div
      class="absolute inset-0 bg-hex-pattern opacity-30 z-0 pointer-events-none"
      aria-hidden="true"
    ></div>

    <!-- Matrix rain canvas overlay -->
<canvas
  id="matrix-overlay"
  class="fixed top-0 left-0 w-full h-full z-60 pointer-events-none opacity-100"
></canvas>

<!-- Main content area -->
<div class="relative z-10">
  <slot />
</div>

<!-- Alpine.js integration -->
<script type="module">
  import Alpine from 'alpinejs';
  window.Alpine = Alpine;
  Alpine.start();
</script>

    <!-- Matrix rain animation script -->
     <script type="module" src="/scripts/matrixLoader.js"></script>

<ThemeToggle client:load />
</body>
</html>

